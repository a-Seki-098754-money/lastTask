<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>書籍購入 - The Third Read</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root {
            --main-dark: #013220;
            --background-light: #f8f4e3;
            --accent-gold: #d4af37;
            --text-dark: #333333;
        }

        body {
            background-color: var(--background-light);
            color: var(--text-dark);
            font-family: "Sawaribi Mincho", serif;
        }

        .navbar {
            background: var(--main-dark) !important;
        }

        .page-header {
            background: linear-gradient(135deg, var(--main-dark) 0%, #1a4d3c 50%, 100%);
            color: var(--text-dark);
            padding: 80px 0 50px 0;
            margin-bottom: 40px;
        }

        .breadcrumb a {
            color: var(--text-dark);
            text-decoration: none;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 25px;
            left: 0;
            right: 0;
            height: 3px;
            background: #e5e7eb;
            z-index: 0;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            border: 3px solid var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            color: var(--text-dark);
        }

        .step.active .step-circle {
            background: var(--main-dark);
            border-color: var(--accent-gold);
            color: white;
        }

        .step.completed .step-circle {
            background: #2c5e4f;
            border-color: #2c5e4f;
            color: white;
        }

        .ticket-card {
            border: 3px solid #e5e7eb;
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
            background: white;
            color: var(--text-dark);
        }

        .ticket-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.2);
        }

        .ticket-card.active {
            border-color: var(--main-dark) !important;
            border-color: var(--accent-gold) !important;
            color: var(--text-dark) !important;
            transform: translateY(-5px);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .ticket-card.active .price-tag,
        .ticket-card.active .bi-check-circle-fill {
            color: var(--accent-gold) !important;
        }


        .price-tag {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--text-dark);
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .seat-map {
            background: #f9fafb;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .stage {
            background: linear-gradient(135deg, var(--dark-bg), var(--primary-color));
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }

        .seat-section {
            margin-bottom: 20px;
        }

        .seat {
            width: 30px;
            height: 30px;
            margin: 3px;
            border-radius: 5px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .seat.available {
            background: #10b981;
            color: white;
        }

        .seat.available:hover {
            background: #059669;
            transform: scale(1.1);
        }

        .seat.selected {
            background: var(--primary-color);
            color: white;
        }

        .seat.sold {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }

        .legend-item {
            display: inline-flex;
            align-items: center;
            margin-right: 20px;
        }

        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            margin-right: 8px;
        }

        .summary-card {
            position: sticky;
            top: 20px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        /* お届け方法のスタイル*/
        /* お届け方法カードのスタイル */
        .delivery-option-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            height: 100%;
        }

        .delivery-option-card:hover {
            border-color: var(--main-dark);
            transform: translateY(-5px);
        }

        /* 選択時のスタイル（前の修正と合わせる） */
        .delivery-option-card.active {
            background-color: var(--main-dark);
            border-color: var(--accent-gold);
            color: white;
        }

        .delivery-option-card.active .text-muted,
        .delivery-option-card.active .text-success {
            color: rgba(255, 255, 255, 0.8) !important;
        }

        .delivery-option-card.active .delivery-price {
            font-weight: bold;
            color: var(--accent-gold);
        }

        .alert-custom {
            border-left: 4px solid;
            border-radius: 10px;
        }

        footer {
            background-color: #2c3e50;
            color: #f5f5f5;
            margin-top: 60px;
        }
    </style>
</head>

<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="bi bi-book-half"></i> The Third Read
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-lg-center">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="book-news.html">News</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="book-author-publish.html">Author・Publish</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Buy</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="my-book-list.html">My Book List</a>
                    </li>
                    <!-- Login: small screens show as normal link, large screens show as button -->
                    <li class="nav-item d-lg-none">
                        <a class="nav-link" href="book-login-page.html">Login</a>
                    </li>
                    <li class="nav-item d-none d-lg-block ms-3">
                        <a class="btn btn-warning fw-bold" href="book-login-page.html" role="button">Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- ページヘッダー -->
    <div class="page-header">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">ホーム</a></li>
                    <li class="breadcrumb-item"><a href="#">書籍一覧</a></li>
                    <li class="breadcrumb-item"><a href="#">作品詳細</a></li>
                    <li class="breadcrumb-item active" aria-current="page">ご購入手続き</li>
                </ol>
            </nav>
            <h1 class="display-4 fw-bold mb-3">ご購入手続き</h1>
            <p class="lead fw-bold mb-1">神保町の記憶 - The Third Read</p>
            <div class="d-flex flex-wrap gap-3 mt-2">
                <span class="mb-0"><i class="bi bi-person-fill"></i> 著者：三読 太郎</span>
                <span class="mb-0"><i class="bi bi-building"></i> 出版：三読出版</span>
                <span class="mb-0"><i class="bi bi-hash"></i> ISBN：978-4-0000-0000-0</span>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- ステップインジケーター -->
        <div class="step-indicator">
            <div class="step completed">
                <div class="step-circle">
                    <i class="bi bi-check-lg"></i>
                </div>
                <div class="fw-bold">カート確認</div>
            </div>
            <div class="step active">
                <div class="step-circle">2</div>
                <div class="fw-bold">お届け方法</div>
            </div>
            <div class="step">
                <div class="step-circle">3</div>
                <div class="fw-bold">お支払い</div>
            </div>
            <div class="step">
                <div class="step-circle">4</div>
                <div class="fw-bold">注文確認</div>
            </div>
            <div class="step">
                <div class="step-circle">5</div>
                <div class="fw-bold">完了</div>
            </div>
        </div>

        <div class="row">
            <!-- メインコンテンツ -->
            <div class="col-lg-8">
                <!-- チケット種類選択 -->
                <div class="mb-5">
                    <h3 class="fw-bold mb-4"><i class="bi bi-journal-bookmark-fill"></i> 書籍の形式を選択</h3>

                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="ticket-card" data-price="1800" data-type="単行本（ハードカバー）">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h5 class="fw-bold mb-1">単行本</h5>
                                        <span class="badge bg-success">在庫あり</span>
                                    </div>
                                    <div class="price-tag">¥1,800</div>
                                </div>
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 上質な布製ハードカバー
                                    </li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 初回限定しおり付属</li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 書き下ろしあとがき収録
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="ticket-card" data-price="4500" data-type="特装版（著者サイン入り）">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h5 class="fw-bold mb-1">特装版</h5>
                                        <span class="badge bg-warning text-dark">数量限定</span>
                                    </div>
                                    <div class="price-tag">¥4,500</div>
                                </div>
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 著者直筆サイン入り</li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 特製化粧箱入り</li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> メイキング小冊子付き
                                    </li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> オリジナルブックカバー付き
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="ticket-card" data-price="1500" data-type="電子書籍（EPUB/PDF）">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h5 class="fw-bold mb-1">電子書籍版</h5>
                                        <span class="badge bg-info">即時閲覧可能</span>
                                    </div>
                                    <div class="price-tag">¥1,500</div>
                                </div>
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 決済後すぐにダウンロード
                                    </li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 高画質カラーで図版収録
                                    </li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 複数デバイスで閲覧可能
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="ticket-card" data-price="3200" data-type="書籍＋限定トートバック">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h5 class="fw-bold mb-1">グッズセット</h5>
                                        <span class="badge bg-danger">お得</span>
                                    </div>
                                    <div class="price-tag">¥3,200</div>
                                </div>
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 単行本 1冊</li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 限定ロゴ入りトートバック
                                    </li>
                                    <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> 配送料込みのお得価格
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 配送方法選択 -->
                <div class="mb-5">
                    <h3 class="fw-bold mb-4"><i class="bi bi-geo-alt-fill"></i> お届け方法の選択</h3>

                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="delivery-option-card active" onclick="selectDelivery(this, 550)">
                                <div class="card-body text-center p-4">
                                    <i class="bi bi-house-door fs-1 mb-3"></i>
                                    <h5 class="fw-bold">自宅配送</h5>
                                    <p class="small text-muted mb-2">指定の住所へお届けします</p>
                                    <div class="delivery-price">送料：￥550</div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="delivery-option-card" onclick="selectDelivery(this, 0)">
                                <div class="card-body text-center p-4">
                                    <i class="bi bi-shop fs-1 mb-3"></i>
                                    <h5 class="fw-bold">店舗受取</h5>
                                    <p class="small text-muted mb-2">三読文庫 神保町本店で受取</p>
                                    <div class="delivery-price text-success">送料：無料</div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="delivery-option-card" onclick="selectDelivery(this, 330)">
                                <div class="card-body text-center p-4">
                                    <i class="bi bi-box-seam fs-1 mb-3"></i>
                                    <h5 class="fw-bold">コンビニ受取</h5>
                                    <p class="small text-muted mb-2">お近くのローソン・ミニストップ</p>
                                    <div class="delivery-price">送料：¥330</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 注意事項 -->
                <div class="alert alert-warning alert-custom border-warning">
                    <h5 class="alert-heading"><i class="bi bi-exclamation-triangle-fill"></i> ご購入に関する確認</h5>
                    <ul class="mb-0">
                        <li>特装版は数量限定のため、決済完了をもって在庫確保となります。</li>
                        <li>電子書籍版は、購入後すぐに「My Book List」よりお読みいただけます。</li>
                        <li>配送先住所に誤りがないか、次画面にて必ずご確認ください。</li>
                        <li>神保町本店での受取は、注文完了から3営業日後より可能です。</li>
                    </ul>
                </div>
            </div>

            <!-- サイドバー（購入サマリー） -->
            <div class="col-lg-4">
                <div class="summary-card">
                    <h5 class="fw-bold mb-4"><i class="bi bi-cart-check"></i> ご注文内容</h5>

                    <div class="mb-4">
                        <h6 class="text-muted mb-3">商品情報</h6>
                        <p class="mb-1 fw-bold">神保町の記憶 - The Third Read</p>
                        <p class="mb-1 small text-muted">
                            <i class="bi bi-person-fill"></i> 著者：三読 太郎
                        </p>
                        <p class="mb-0 small text-muted">
                            <i class="bi bi-building"></i> 三読出版
                        </p>
                    </div>

                    <hr>

                    <div class="mb-4">
                        <h6 class="text-muted mb-3">選択した形式</h6>
                        <div id="selectedTicket" class="text-dark fw-bold">
                            形式を選択してください
                        </div>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-muted mb-3">お届け方法</h6>
                        <div id="selectedSeats" class="text-dark fw-bold">
                            配送方法を選択してください
                        </div>
                    </div>

                    <hr>

                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span>書籍代金</span>
                            <span id="ticketPrice">¥0</span>
                        </div>
                        <div class="d-flex justify-content-between mb-3">
                            <span>配送料</span>
                            <span id="serviceFee">¥0</span>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between fs-4 fw-bold">
                            <span>合計（税込）</span>
                            <span id="totalPrice" style="color: var(--main-dark);">¥0</span>
                        </div>
                    </div>

                    <button class="btn btn-lg w-100 fw-bold mb-2"
                        style="background: var(--main-dark); color: var(--accent-gold); border: 2px solid var(--accent-gold);">
                        お支払い方法へ進む <i class="bi bi-arrow-right"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-lg w-100">
                        <i class="bi bi-arrow-left"></i> 戻る
                    </button>

                    <div class="mt-4 text-center">
                        <small class="text-muted">
                            <i class="bi bi-lock-fill"></i> 安全なSSL通信で保護されています
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- フッター -->
    <footer class="py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h5 class="fw-bold mb-3"><i class="bi bi-book-half"></i> The Third Read</h5>
                    <p class="text-light">自分だけの名作の探求</p>
                </div>
                <div class="col-md-2 mb-3">
                    <h6 class="fw-bold mb-3">サイト情報</h6>
                    <ul class="list-unstyled">
                        <li><a href="site-info.html#about" class="text-light text-decoration-none">About</a></li>
                        <li><a href="site-info.html#terms" class="text-light text-decoration-none">利用規約</a></li>
                        <li><a href="site-info.html#privacy" class="text-light text-decoration-none">プライバシー</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-3">
                    <h6 class="fw-bold mb-3">サポート</h6>
                    <ul class="list-unstyled">
                        <li><a href="support.html#help" class="text-light text-decoration-none">ヘルプ</a></li>
                        <li><a href="support.html#contactF" class="text-light text-decoration-none">お問い合わせ</a></li>
                        <li><a href="support.html#faq" class="text-light text-decoration-none">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-3">
                    <h6 class="fw-bold mb-3">フォローする</h6>
                    <div class="d-flex gap-3">
                        <a href="https://twitter.com/" target="_blank" class="text-light"><i
                                class="bi bi-twitter fs-4"></i></a>
                        <a href="https://www.instagram.com/" target="_blank" class="text-light"><i
                                class="bi bi-instagram fs-4"></i></a>
                        <a href="https://note.com/" target="_blank" class="text-light"><i
                                class="bi bi-pencil-square fs-4"></i></a>
                    </div>
                </div>
            </div>
            <hr class="border-light">
            <p class="text-center text-light mb-0">&copy; 2024 The Third Reed. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // 金額・状態を管理する変数
        let selectedBookPrice = 0;
        let selectedBookType = '';
        let selectedShippingFee = 0;
        let selectedShippingName = '';

        // 1. 書籍形式（チケットカード）の選択イベント
        document.querySelectorAll('.ticket-card').forEach(card => {
            card.addEventListener('click', function () {
                // 他のカードの選択状態を解除し、クリックされたカードをactiveにする
                document.querySelectorAll('.ticket-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');

                // data属性から価格とタイプを取得
                selectedBookPrice = parseInt(this.dataset.price);
                selectedBookType = this.dataset.type;

                updateSummary();
            });
        });

        // 2. お届け方法の選択イベント
        function selectDelivery(element, cost) {
            // デザインの切り替え
            document.querySelectorAll('.delivery-option-card').forEach(card => {
                card.classList.remove('active');
            });
            element.classList.add('active');

            // 送料と配送方法名（カード内のh5テキスト）を取得
            selectedShippingFee = cost;
            selectedShippingName = element.querySelector('h5').textContent;

            updateSummary();
        }

        // 3. 右側サマリー（購入内容）の更新関数
        function updateSummary() {
            // --- 選択中の商品情報の表示 ---
            if (selectedBookType) {
                document.getElementById('selectedTicket').innerHTML = `
                <div class="d-flex justify-content-between">
                    <span>${selectedBookType}</span>
                    <span class="fw-bold">¥${selectedBookPrice.toLocaleString()}</span>
                </div>
            `;
            } else {
                document.getElementById('selectedTicket').innerHTML = '<span class="text-muted">書籍の形式を選択してください</span>';
            }

            // --- 選択中のお届け方法の表示 ---
            const shippingDisplay = document.getElementById('selectedSeats'); // IDは以前のものを流用
            if (selectedShippingName) {
                shippingDisplay.innerHTML = `
                <div class="d-flex justify-content-between">
                    <span>${selectedShippingName}</span>
                    <span class="badge bg-secondary">選択済み</span>
                </div>
            `;
            } else {
                shippingDisplay.innerHTML = '<span class="text-muted">お届け方法を選択してください</span>';
            }

            // --- 料金計算 ---
            const total = selectedBookPrice + selectedShippingFee;

            // 右側の金額表示部分を更新
            // ※HTML側のIDが ticketPrice, serviceFee, totalPrice であることを前提としています
            if (document.getElementById('ticketPrice')) {
                document.getElementById('ticketPrice').textContent = `¥${selectedBookPrice.toLocaleString()}`;
            }
            if (document.getElementById('serviceFee')) {
                // 「サービス手数料」という表示を「配送料」として流用
                document.getElementById('serviceFee').textContent = `¥${selectedShippingFee.toLocaleString()}`;
            }
            if (document.getElementById('totalPrice')) {
                document.getElementById('totalPrice').textContent = `¥${total.toLocaleString()}`;
            }
        }

        // 初期状態の表示をリセット
        window.onload = function () {
            updateSummary();
        };
    </script>


</body>

</html>